{% extends 'accounts/associations_base.html' %}
{% load credit_tags %}

{% block tab_overview %} active{% endblock %}

{% block details %}
    <h3>New member requests</h3>
    {% if pending_memberships %}
        <form method="post"
              action="{% url 'association_members_edit' association_name=association.slug %}?next={{ request.path }}">
            <div class="table-responsive">
                {% csrf_token %}
                <table class="table table-hover">
                    <tbody>
                    {% for entry in pending_memberships %}{% include 'accounts/snippet_member_edits.html' %}{% endfor %}
                    </tbody>
                </table>
            </div>
        </form>
    {% else %}
        <p>Your association has no new member requests.</p>
    {% endif %}
    <p>
        <a href="{% url 'association_members' association_name=association.slug %}" class="btn btn-primary">
            View all members
        </a>
    </p>

    <h3>Association balance</h3>
    <p>
        When a user deposits money on their account via your association, the money remains theirs.
        Therefore the association balance is decreased to indicate that the association owes money to that user.
    </p>
    <div class="card">
        <div class="card-body">
            Association balance: <strong>{{ association.account.get_balance|euro }}</strong>
        </div>
    </div>
    <p class="mt-3">
        <a href="{% url 'association_credits' association_name=association.slug %}" class="btn btn-primary">
            View all transactions
        </a>
        <a href="{% url 'association_transaction_add' association_name=association.slug %}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Money transfer
        </a>
    </p>

{% endblock %}